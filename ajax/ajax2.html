<!DOCTYPE html>
<html>
    <head>
        <title>AJAX #2</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    </head>
    <body>
        <div >
            <h2>PHP Camp</h2>
        </div>
        <div>
            <h2>Wyswietl uzytkownikow</h2>
            <button type="button" id="see">Pokaz produkty</button>
        </div>
        <div id="show">

        </div>
        <div>
            <h2>Dodaj produkt</h2>
            Nazwa produktu:<input type="text" id="pname"><br>
            Cena: <input type="text" id="pprice"><br>
            <input type="submit" id="put">
        </div>
        <div id="show2">

        </div>
        <div>
            <h2>Edycja warto≈õci</h2>
            Id produktu<input type="text" id="wid"><br>
            Nowa nazwa:<input type="text" id="wname"><br>
            Nowa cena:<input type="text" id="wprice"><br>
            <input type="submit" id="edit">
        </div>
        <div id="show3">

        </div>
        <!--
        http://localhost/phppc/index11.php/products/create/nazwaproduktu/cena/
                -->

        
        <script type="text/javascript">
            $(document).ready(function() {
                $("#see").click(function(){
                    var url = "http://localhost/phppc/index11.php/products/";
                    $.ajax({
                        method: "GET",
                        url: url, success: function(result){
                            $("#show").html(result);
                            $("button.delete").on('click', function() {
                                var url = "http://localhost/phppc/index11.php/products/"+$(this).attr("value");
                                $.ajax({
                                    method: "DELETE",
                                    url: url, success: function(result){
                                        $("#show").html(result);
                                    }
                                });
                            });

                        }
                    });
                });
                $("#put").click(function(){
                    var url = "http://localhost/phppc/index11.php/products/create/"+$('#pname').val()+"/"+$('#pprice').val()+"/";
                    $.ajax({
                        method: "PUT",
                        url: url, success: function(result){
                            $("#show2").html(result);

                        }
                    });
                });
                $("#edit").click(function(){
                    var url = "http://localhost/phppc/index11.php/products/edit/"+$('#wid').val()+"/"+$('#wname').val()+"/"+$('#wprice').val()+"/";
                    $.ajax({
                        method: "GET",
                        url: url, success: function(result){
                            $("#show3").html(result);

                        }
                    });
                });
            });
        </script>
    </body>
</html>
